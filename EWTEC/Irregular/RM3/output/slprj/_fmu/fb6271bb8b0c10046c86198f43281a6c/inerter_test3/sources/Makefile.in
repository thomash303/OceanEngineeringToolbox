# Makefile generated by OpenModelica
CC=@CC@
AR=@AR@
CFLAGS=@CFLAGS@
LD=$(CC) -shared
# define OMC_LDFLAGS_LINK_TYPE env variable to override this
OMC_LDFLAGS_LINK_TYPE=static
LDFLAGS=@LDFLAGS@ @LIBS@
DLLEXT=@DLLEXT@
NEED_RUNTIME=@NEED_RUNTIME@
NEED_DGESV=@NEED_DGESV@
NEED_CMINPACK=@NEED_CMINPACK@
NEED_SUNDIALS=@NEED_SUNDIALS@
FMIPLATFORM=@FMIPLATFORM@
# Note: Simulation of the fmu with dymola does not work with -finline-small-functions (enabled by most optimization levels)
CPPFLAGS=@CPPFLAGS@
override CPPFLAGS += -DFMI2_OVERRIDE_FUNCTION_PREFIX

override CPPFLAGS += 

CFILES = inerter_test3.c \
         inerter_test3_functions.c \
         inerter_test3_records.c \
         inerter_test3_01exo.c \
         inerter_test3_02nls.c \
         inerter_test3_03lsy.c \
         inerter_test3_04set.c \
         inerter_test3_05evt.c \
         inerter_test3_06inz.c \
         inerter_test3_07dly.c \
         inerter_test3_08bnd.c \
         inerter_test3_09alg.c \
         inerter_test3_10asr.c \
         inerter_test3_11mix.c \
         inerter_test3_12jac.c \
         inerter_test3_13opt.c \
         inerter_test3_14lnz.c \
         inerter_test3_15syn.c \
         inerter_test3_16dae.c \
         inerter_test3_17inl.c \
         inerter_test3_18spd.c \
         inerter_test3_init_fmu.c \
         inerter_test3_FMU.c \
         inerter_test3_06inz_part0.c \
         inerter_test3_06inz_part1.c \
         inerter_test3_08bnd_part2.c \
         inerter_test3_08bnd_part3.c
OFILES=$(CFILES:.c=.o)

RUNTIMEDIR=.
ifneq ($(NEED_DGESV),)
DGESV_OBJS = ./external_solvers/dgesv.o ./external_solvers/dgetrf.o ./external_solvers/dlamch.o ./external_solvers/ilaenv.o ./external_solvers/xerbla.o ./external_solvers/dgetf2.o ./external_solvers/dgetrs.o ./external_solvers/dlaswp.o ./external_solvers/ieeeck.o ./external_solvers/iparmq.o ./external_solvers/dgemm.o ./external_solvers/dger.o ./external_solvers/dscal.o ./external_solvers/dswap.o ./external_solvers/dtrsm.o ./external_solvers/idamax.o ./external_solvers/lsame.o ./external_solvers/i_nint.o ./external_solvers/pow_di.o ./external_solvers/s_cmp.o ./external_solvers/s_copy.o
endif
ifneq ($(NEED_CMINPACK),)
CMINPACK_OBJS=
endif
ifneq ($(NEED_RUNTIME),)
RUNTIMEFILES=./gc/memory_pool.o ./gc/omc_gc.o ./util/base_array.o ./util/boolean_array.o ./util/context.o ./util/division.o ./util/doubleEndedList.o ./util/generic_array.o ./util/index_spec.o ./util/integer_array.o ./util/list.o ./util/modelica_string_lit.o ./util/modelica_string.o ./util/ModelicaUtilities.o ./util/omc_error.o ./util/omc_file.o ./util/omc_init.o ./util/omc_mmap.o ./util/omc_msvc.o ./util/omc_numbers.o ./util/parallel_helper.o ./util/rational.o ./util/real_array.o ./util/ringbuffer.o ./util/simulation_options.o ./util/string_array.o ./util/utility.o ./util/varinfo.o ./math-support/pivot.o ./simulation/jacobian_util.o ./simulation/omc_simulation_util.o ./simulation/options.o ./simulation/simulation_info_json.o ./simulation/simulation_omc_assert.o ./simulation/solver/delay.o ./simulation/solver/fmi_events.o ./simulation/solver/model_help.o ./simulation/solver/omc_math.o ./simulation/solver/spatialDistribution.o ./simulation/solver/stateset.o ./simulation/solver/synchronous.o ./simulation/solver/initialization/initialization.o ./meta/meta_modelica_catch.o ./simulation/solver/linearSystem.o ./simulation/solver/linearSolverLapack.o ./simulation/solver/linearSolverTotalPivot.o $(DGESV_OBJS) $(CMINPACK_OBJS)
endif
ifneq ($(NEED_SUNDIALS),)
FMISUNDIALSFILES=
LDFLAGS+=-Wl,-Bstatic -lsundials_cvode -lsundials_nvecserial -Wl,-Bdynamic
endif

PHONY: inerter_test3_FMU
inerter_test3_FMU: nozip
	cd .. && rm -f ../inerter_test3.fmu && zip -r ../inerter_test3.fmu *
nozip: inerter_test3_functions.h inerter_test3_literals.h $(OFILES) $(RUNTIMEFILES) $(FMISUNDIALSFILES)
	$(CXX) -shared -I. -o inerter_test3$(DLLEXT) $(RUNTIMEFILES) $(FMISUNDIALSFILES) $(OFILES) $(CPPFLAGS) -L"C:/Users/thogan1/OneDrive - University of New Brunswick/Grad Studies/OpenModelica/FMI"   $(CFLAGS) $(LDFLAGS) -llis -Wl,--kill-at
	mkdir.exe -p ../binaries/win64
	dlltool -d inerter_test3.def --dllname inerter_test3$(DLLEXT) --output-lib inerter_test3.lib --kill-at
	cp inerter_test3$(DLLEXT) inerter_test3.lib inerter_test3_FMU.libs ../binaries/win64/
	rm -f *.o inerter_test3$(DLLEXT) $(OFILES) $(RUNTIMEFILES) $(FMISUNDIALSFILES)
	cd .. && rm -f ../inerter_test3.fmu && zip -r ../inerter_test3.fmu *

